<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>openMMC: modules/fpga_spi.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">openMMC
   </div>
   <div id="projectbrief">Open Source Modular MMC for AMCs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('fpga__spi_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">fpga_spi.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;FreeRTOS.h&quot;</code><br />
<code>#include &quot;task.h&quot;</code><br />
<code>#include &quot;<a class="el" href="port_8h_source.html">port.h</a>&quot;</code><br />
<code>#include &quot;i2c_mapping.h&quot;</code><br />
<code>#include &quot;<a class="el" href="fpga__spi_8h_source.html">fpga_spi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__priorities_8h_source.html">task_priorities.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="at24mac_8h_source.html">at24mac.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sdr_8h_source.html">sdr.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fpga_spi.c:</div>
<div class="dyncontent">
<div class="center"><img src="fpga__spi_8c__incl.png" border="0" usemap="#amodules_2fpga__spi_8c" alt=""/></div>
<map name="amodules_2fpga__spi_8c" id="amodules_2fpga__spi_8c">
<area shape="rect" title=" " alt="" coords="1956,5,2103,33"/>
<area shape="rect" title=" " alt="" coords="1832,308,1928,336"/>
<area shape="poly" title=" " alt="" coords="2039,32,2054,67,2057,88,2054,109,2026,169,1988,222,1946,267,1910,300,1907,296,1943,263,1984,219,2022,166,2049,108,2052,88,2049,68,2035,34"/>
<area shape="rect" title=" " alt="" coords="1742,308,1804,336"/>
<area shape="poly" title=" " alt="" coords="1955,33,1863,53,1824,67,1800,83,1784,107,1773,133,1763,191,1763,247,1770,292,1764,293,1758,248,1757,191,1768,132,1780,104,1797,79,1822,62,1861,48,1954,28"/>
<area shape="rect" href="port_8h.html" title="Port layer (includes all portable functions headers)" alt="" coords="1089,157,1148,184"/>
<area shape="poly" title=" " alt="" coords="1955,35,1164,164,1163,159,1955,30"/>
<area shape="rect" title=" " alt="" coords="1923,81,2039,109"/>
<area shape="poly" title=" " alt="" coords="2023,35,2000,69,1996,67,2018,32"/>
<area shape="rect" href="fpga__spi_8h.html" title=" " alt="" coords="1810,81,1899,109"/>
<area shape="poly" title=" " alt="" coords="1999,36,1900,77,1898,72,1997,31"/>
<area shape="rect" href="sdr_8h.html" title=" " alt="" coords="2101,157,2154,184"/>
<area shape="poly" title=" " alt="" coords="2050,31,2074,52,2098,80,2114,110,2124,141,2119,142,2109,112,2094,82,2071,56,2046,36"/>
<area shape="rect" href="task__priorities_8h.html" title=" " alt="" coords="2165,81,2291,109"/>
<area shape="poly" title=" " alt="" coords="2066,31,2179,73,2177,78,2064,36"/>
<area shape="rect" href="at24mac_8h.html" title="AT24MACX02 EEPROM module interface declarations." alt="" coords="2315,81,2405,109"/>
<area shape="poly" title=" " alt="" coords="2089,31,2300,78,2299,83,2088,36"/>
<area shape="rect" title=" " alt="" coords="1416,308,1557,336"/>
<area shape="poly" title=" " alt="" coords="1149,171,1222,176,1314,187,1401,204,1435,216,1459,230,1471,244,1479,260,1487,292,1482,293,1474,262,1466,247,1455,234,1433,221,1399,209,1313,192,1221,181,1148,176"/>
<area shape="rect" href="lpc17__gpio_8h.html" title=" " alt="" coords="1342,232,1445,260"/>
<area shape="poly" title=" " alt="" coords="1149,177,1330,225,1329,230,1148,182"/>
<area shape="rect" href="lpc17__i2c_8h.html" title="I2C driver for LPC17xx." alt="" coords="1642,232,1736,260"/>
<area shape="poly" title=" " alt="" coords="1149,172,1346,192,1627,229,1627,235,1345,197,1148,177"/>
<area shape="rect" href="lpc17__ssp_8h.html" title=" " alt="" coords="1520,232,1618,260"/>
<area shape="poly" title=" " alt="" coords="1149,174,1502,230,1506,230,1505,236,1501,235,1148,179"/>
<area shape="rect" href="lpc17__spi_8h.html" title="Legacy SPI driver definitions for LPC17xx." alt="" coords="35,232,130,260"/>
<area shape="poly" title=" " alt="" coords="1088,175,713,189,437,207,152,235,145,236,145,231,152,230,436,202,713,184,1088,170"/>
<area shape="rect" href="lpc17__watchdog_8h.html" title="Definitions of Watchdog driver implementation for LPC17xx." alt="" coords="164,232,302,260"/>
<area shape="poly" title=" " alt="" coords="1089,176,780,194,554,212,318,235,318,229,554,206,780,189,1088,171"/>
<area shape="rect" href="lpc17__interruptions_8h.html" title="Interruptions control." alt="" coords="625,232,783,260"/>
<area shape="poly" title=" " alt="" coords="1089,180,794,232,793,226,1088,175"/>
<area shape="rect" href="lpc17__hpm_8h.html" title="Firmware update functions (HPM.1)" alt="" coords="808,232,912,260"/>
<area shape="poly" title=" " alt="" coords="1089,183,922,230,920,225,1088,178"/>
<area shape="rect" href="lpc17__power_8h.html" title="Definitions of power mode selection for LPC17xx." alt="" coords="326,232,442,260"/>
<area shape="poly" title=" " alt="" coords="1089,176,833,195,650,212,457,235,457,229,649,207,833,190,1088,171"/>
<area shape="rect" href="lpc17__pincfg_8h.html" title="Pin Config functions redirection for LPC17xx." alt="" coords="1061,232,1176,260"/>
<area shape="poly" title=" " alt="" coords="1114,185,1112,217,1107,217,1109,185"/>
<area shape="rect" title=" " alt="" coords="1200,232,1317,260"/>
<area shape="poly" title=" " alt="" coords="1145,183,1221,222,1219,227,1142,187"/>
<area shape="rect" href="arm__cm3__reset_8h.html" title=" " alt="" coords="466,232,600,260"/>
<area shape="poly" title=" " alt="" coords="1089,178,894,200,616,235,615,229,894,194,1088,172"/>
<area shape="rect" href="lpc17__uart_8h.html" title="LPC17xx UART interface definitions." alt="" coords="936,232,1037,260"/>
<area shape="poly" title=" " alt="" coords="1096,187,1025,227,1022,222,1094,183"/>
<area shape="rect" title=" " alt="" coords="1253,308,1392,336"/>
<area shape="poly" title=" " alt="" coords="1382,262,1347,299,1343,295,1379,259"/>
<area shape="poly" title=" " alt="" coords="1619,256,1817,303,1816,308,1618,262"/>
<area shape="poly" title=" " alt="" coords="1607,258,1729,302,1727,307,1605,263"/>
<area shape="poly" title=" " alt="" coords="1556,263,1514,300,1511,296,1553,259"/>
<area shape="rect" title=" " alt="" coords="1581,308,1714,336"/>
<area shape="poly" title=" " alt="" coords="1585,259,1625,295,1621,299,1581,263"/>
<area shape="rect" title=" " alt="" coords="5,308,136,336"/>
<area shape="poly" title=" " alt="" coords="83,261,78,293,72,292,78,260"/>
<area shape="rect" title=" " alt="" coords="160,308,306,336"/>
<area shape="poly" title=" " alt="" coords="236,261,236,292,230,292,230,261"/>
<area shape="rect" href="core__cm3_8h.html" title="CMSIS Cortex&#45;M3 Core Peripheral Access Layer Header File." alt="" coords="576,308,672,336"/>
<area shape="poly" title=" " alt="" coords="691,263,651,299,648,295,688,259"/>
<area shape="rect" title=" " alt="" coords="561,459,631,487"/>
<area shape="poly" title=" " alt="" coords="651,334,673,349,693,367,704,389,705,401,701,413,677,439,647,458,644,453,673,435,696,410,700,400,699,390,688,370,669,353,648,339"/>
<area shape="rect" href="cmsis__version_8h.html" title="CMSIS Core(M) Version definitions." alt="" coords="561,384,687,411"/>
<area shape="poly" title=" " alt="" coords="626,336,626,368,621,368,621,336"/>
<area shape="rect" href="cmsis__compiler_8h.html" title="CMSIS compiler generic header file." alt="" coords="402,384,537,411"/>
<area shape="poly" title=" " alt="" coords="597,339,512,379,509,374,595,334"/>
<area shape="poly" title=" " alt="" coords="493,410,562,449,559,454,490,414"/>
<area shape="rect" title=" " alt="" coords="331,308,471,336"/>
<area shape="poly" title=" " alt="" coords="390,260,397,292,392,293,384,261"/>
<area shape="poly" title=" " alt="" coords="1123,232,1125,200,1130,200,1128,232"/>
<area shape="poly" title=" " alt="" coords="551,258,598,296,594,300,548,263"/>
<area shape="rect" title=" " alt="" coords="997,308,1067,336"/>
<area shape="poly" title=" " alt="" coords="997,259,1018,293,1013,296,992,262"/>
<area shape="rect" title=" " alt="" coords="907,308,972,336"/>
<area shape="poly" title=" " alt="" coords="980,262,958,296,954,294,976,259"/>
<area shape="rect" title=" " alt="" coords="1910,157,1983,184"/>
<area shape="poly" title=" " alt="" coords="1873,107,1920,145,1917,149,1869,111"/>
<area shape="poly" title=" " alt="" coords="1900,105,2087,155,2086,161,1898,111"/>
<area shape="rect" href="utils_8h.html" title="General utilities functions." alt="" coords="1824,157,1885,184"/>
<area shape="poly" title=" " alt="" coords="1857,109,1857,141,1852,141,1852,109"/>
<area shape="rect" href="ipmb_8h.html" title="Definitions used in IPMB Layer." alt="" coords="2097,232,2164,260"/>
<area shape="poly" title=" " alt="" coords="2131,185,2132,217,2127,217,2126,185"/>
<area shape="poly" title=" " alt="" coords="2097,260,1940,306,1939,301,2096,255"/>
<area shape="poly" title=" " alt="" coords="2097,256,1975,278,1820,311,1819,311,1818,306,1819,305,1974,273,2096,251"/>
<area shape="rect" title=" " alt="" coords="2094,308,2167,336"/>
<area shape="poly" title=" " alt="" coords="2133,261,2133,292,2128,292,2128,261"/>
<area shape="rect" title=" " alt="" coords="2191,308,2273,336"/>
<area shape="poly" title=" " alt="" coords="2150,258,2203,297,2200,301,2147,263"/>
<area shape="rect" href="board__ipmb_8h.html" title="Board specific definitions used in IPMB Layer." alt="" coords="1959,308,2070,336"/>
<area shape="poly" title=" " alt="" coords="2111,263,2049,302,2047,297,2108,258"/>
<area shape="poly" title=" " alt="" coords="1859,184,1878,292,1872,293,1854,185"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae460cde38ecc2b59fc4ccb5ed2206bfd" id="r_ae460cde38ecc2b59fc4ccb5ed2206bfd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae460cde38ecc2b59fc4ccb5ed2206bfd">FPGA_SPI_BITRATE</a>&#160;&#160;&#160;10000000</td></tr>
<tr class="separator:ae460cde38ecc2b59fc4ccb5ed2206bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9291224a7282bafe4ef7f702701ae8c8" id="r_a9291224a7282bafe4ef7f702701ae8c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9291224a7282bafe4ef7f702701ae8c8">FPGA_SPI_FRAME_SIZE</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a9291224a7282bafe4ef7f702701ae8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8c9e6492b68d86051c70e3345d53f67c" id="r_a8c9e6492b68d86051c70e3345d53f67c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8c9e6492b68d86051c70e3345d53f67c">vTaskFPGA_COMM</a> (void *Parameters)</td></tr>
<tr class="memdesc:a8c9e6492b68d86051c70e3345d53f67c"><td class="mdescLeft">&#160;</td><td class="mdescRight">FPGA Diagnostics Task.  <br /></td></tr>
<tr class="separator:a8c9e6492b68d86051c70e3345d53f67c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6c79d3bc7c6f71f727a737383eb46e1" id="r_ac6c79d3bc7c6f71f727a737383eb46e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac6c79d3bc7c6f71f727a737383eb46e1">fpga_spi_init</a> (void)</td></tr>
<tr class="memdesc:ac6c79d3bc7c6f71f727a737383eb46e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the FPGA Diagnostics Task.  <br /></td></tr>
<tr class="separator:ac6c79d3bc7c6f71f727a737383eb46e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae460cde38ecc2b59fc4ccb5ed2206bfd" name="ae460cde38ecc2b59fc4ccb5ed2206bfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae460cde38ecc2b59fc4ccb5ed2206bfd">&#9670;&#160;</a></span>FPGA_SPI_BITRATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FPGA_SPI_BITRATE&#160;&#160;&#160;10000000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9291224a7282bafe4ef7f702701ae8c8" name="a9291224a7282bafe4ef7f702701ae8c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9291224a7282bafe4ef7f702701ae8c8">&#9670;&#160;</a></span>FPGA_SPI_FRAME_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FPGA_SPI_FRAME_SIZE&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac6c79d3bc7c6f71f727a737383eb46e1" name="ac6c79d3bc7c6f71f727a737383eb46e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6c79d3bc7c6f71f727a737383eb46e1">&#9670;&#160;</a></span>fpga_spi_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fpga_spi_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the FPGA Diagnostics Task. </p>

</div>
</div>
<a id="a8c9e6492b68d86051c70e3345d53f67c" name="a8c9e6492b68d86051c70e3345d53f67c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c9e6492b68d86051c70e3345d53f67c">&#9670;&#160;</a></span>vTaskFPGA_COMM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vTaskFPGA_COMM </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>Parameters</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FPGA Diagnostics Task. </p>
<p>This task formats all sensors information and sends to the FPGA via SPI. All the information is accessed by the FPGA using the Wishbone stream.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Parameters</td><td>Pointer to parameters passed to the task upon initialization. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e05d7e2b1ecd646af5bb94391405f3b5.html">modules</a></li><li class="navelem"><a class="el" href="fpga__spi_8c.html">fpga_spi.c</a></li>
    <li class="footer">Generated on Wed Jul 24 2024 08:15:56 for openMMC by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
